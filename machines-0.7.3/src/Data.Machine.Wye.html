<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Module      :  Data.Machine.Wye</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Copyright   :  (C) 2012 Edward Kmett, R&#250;nar Bjarnason, Paul Chiusano</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE)</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Stability   :  provisional</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Portability :  Rank-2 Types, GADTs</span><span>
</span><span id="line-12"></span><span class="hs-comment">--</span><span>
</span><span id="line-13"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Machine.Wye</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Wyes</span></span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Data.Machine.Wye.html#Wye"><span class="hs-identifier">Wye</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier">WyeT</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier">Y</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier">wye</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier">addX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier">addY</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capX"><span class="hs-identifier">capX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capY"><span class="hs-identifier">capY</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capWye"><span class="hs-identifier">capWye</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Category</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Process.html"><span class="hs-identifier">Data.Machine.Process</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Type.html"><span class="hs-identifier">Data.Machine.Type</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Is.html"><span class="hs-identifier">Data.Machine.Is</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Source.html"><span class="hs-identifier">Data.Machine.Source</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(.)</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">id</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- Wyes</span><span>
</span><span id="line-33"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="annot"><span class="hs-comment">-- | The input descriptor for a 'Wye' or 'WyeT'</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">data</span><span> </span><span id="Y"><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span></span><span> </span><span id="local-6989586621679100313"><span class="annot"><a href="#local-6989586621679100313"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679100314"><span class="annot"><a href="#local-6989586621679100314"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679100315"><span class="annot"><a href="#local-6989586621679100315"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-37"></span><span>  </span><span id="local-6989586621679100227"><span id="local-6989586621679100228"><span id="X"><span class="annot"><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100227"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100228"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100227"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>            </span><span class="hs-comment">-- block waiting on the left input</span><span>
</span><span id="line-38"></span><span>  </span><span id="local-6989586621679100231"><span id="local-6989586621679100232"><span id="Y"><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100231"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100232"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100232"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>            </span><span class="hs-comment">-- block waiting on the right input</span><span>
</span><span id="line-39"></span><span>  </span><span id="local-6989586621679100239"><span id="local-6989586621679100240"><span id="Z"><span class="annot"><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100239"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100240"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679100239"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100240"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-comment">-- block waiting on either input</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="annot"><span class="hs-comment">-- | A 'Machine' that can read from two input stream in a non-deterministic manner.</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">type</span><span> </span><span id="Wye"><span class="annot"><a href="Data.Machine.Wye.html#Wye"><span class="hs-identifier hs-var">Wye</span></a></span></span><span> </span><span id="local-6989586621679100320"><span class="annot"><a href="#local-6989586621679100320"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679100321"><span class="annot"><a href="#local-6989586621679100321"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679100322"><span class="annot"><a href="#local-6989586621679100322"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Machine.Type.html#Machine"><span class="hs-identifier hs-type">Machine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100320"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100321"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679100322"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="annot"><span class="hs-comment">-- | A 'Machine' that can read from two input stream in a non-deterministic manner with monadic side-effects.</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">type</span><span> </span><span id="WyeT"><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-var">WyeT</span></a></span></span><span> </span><span id="local-6989586621679100323"><span class="annot"><a href="#local-6989586621679100323"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679100324"><span class="annot"><a href="#local-6989586621679100324"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679100325"><span class="annot"><a href="#local-6989586621679100325"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679100326"><span class="annot"><a href="#local-6989586621679100326"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Machine.Type.html#MachineT"><span class="hs-identifier hs-type">MachineT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100323"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100324"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100325"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679100326"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">-- | Compose a pair of pipes onto the front of a 'Wye'.</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-- | Precompose a 'Process' onto each input of a 'Wye' (or 'WyeT').</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- This is left biased in that it tries to draw values from the 'X' input whenever they are</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- available, and only draws from the 'Y' input when 'X' would block.</span><span>
</span><span id="line-53"></span><span id="local-6989586621679100178"><span id="local-6989586621679100179"><span id="local-6989586621679100180"><span id="local-6989586621679100182"><span id="local-6989586621679100183"><span id="local-6989586621679100184"><span class="annot"><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-type">wye</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679100178"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100178"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100179"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100180"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100178"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100182"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100183"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100178"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100180"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100183"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100184"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100178"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100179"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100182"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100184"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-54"></span><span id="wye"><span class="annot"><span class="annottext">wye :: forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var hs-var">wye</span></a></span></span><span> </span><span id="local-6989586621679100333"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span id="local-6989586621679100334"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span></span><span> </span><span id="local-6989586621679100335"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100335"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Step (Y a b) c (MachineT m (Y a b) c)) -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
m (Step k o (MachineT m k o)) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#MachineT"><span class="hs-identifier hs-var">MachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Step (Y a b) c (MachineT m (Y a b) c)) -&gt; MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
-&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c -&gt; m (Step (Y a' b') c (WyeT m a' b' c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100335"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Y a' b') c (WyeT m a' b' c))
-&gt; (Step (Y a' b') c (WyeT m a' b' c)
    -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679100338"><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679100340"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679100340"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679100341"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100341"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (MachineT m (Y a b) c)
 -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; MachineT m (Y a b) c -&gt; Step (Y a b) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r. o -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-var">Yield</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679100340"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100341"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r. Step k o r
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100344"><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100344"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a' b' t
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span id="local-6989586621679100352"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100352"><span class="hs-identifier hs-var">ff</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a' -&gt; m (Step (Is a) a' (ProcessT m a a'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is a) a' (ProcessT m a a'))
-&gt; (Step (Is a) a' (ProcessT m a a')
    -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679100353"><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679100353"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679100353"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679100354"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679100354"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679100355"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100355"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100355"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a'
t
</span><a href="#local-6989586621679100354"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; MachineT m (Y a b) c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100352"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100358"><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679100358"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is a t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679100368"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100368"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (MachineT m (Y a b) c)
 -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MachineT m (Y a b) c)
-&gt; Y t b t
-&gt; MachineT m (Y a b) c
-&gt; Step (Y t b) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679100369"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100369"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679100358"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100369"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y t b t
forall a b. Y a b a
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span>
</span><span id="line-61"></span><span>                                  </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (MachineT m (Y a b) c)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100368"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100371"><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100371"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a' b' t
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span> </span><span id="local-6989586621679100378"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100378"><span class="hs-identifier hs-var">ff</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b' -&gt; m (Step (Is b) b' (ProcessT m b b'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is b) b' (ProcessT m b b'))
-&gt; (Step (Is b) b' (ProcessT m b b')
    -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679100379"><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100379"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100379"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679100380"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679100380"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679100381"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100381"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100381"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100371"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b'
t
</span><a href="#local-6989586621679100380"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; MachineT m (Y a b) c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100378"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100382"><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679100382"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is b t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679100391"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100391"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (MachineT m (Y a b) c)
 -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MachineT m (Y a b) c)
-&gt; Y a t t
-&gt; MachineT m (Y a b) c
-&gt; Step (Y a t) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679100392"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100392"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679100382"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100392"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y a t t
forall a b. Y a b b
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span>
</span><span id="line-66"></span><span>                                  </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (MachineT m (Y a b) c)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100391"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100393"><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100393"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a' b' t
</span><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span id="local-6989586621679100407"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100407"><span class="hs-identifier hs-var">ff</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a' -&gt; m (Step (Is a) a' (ProcessT m a a'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100333"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is a) a' (ProcessT m a a'))
-&gt; (Step (Is a) a' (ProcessT m a a')
    -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679100408"><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679100408"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679100408"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679100409"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679100409"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679100410"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100410"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (Either a' b' -&gt; MachineT m (Y a b) c)
-&gt; Either a' b'
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100410"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; (Either a' b' -&gt; WyeT m a' b' c)
-&gt; Either a' b'
-&gt; MachineT m (Y a b) c
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
Either a' b' -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100393"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either a' b' -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; Either a' b' -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a' -&gt; Either a' b'
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679100409"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b' -&gt; m (Step (Is b) b' (ProcessT m b b'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is b) b' (ProcessT m b b'))
-&gt; (Step (Is b) b' (ProcessT m b b')
    -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679100411"><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100411"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100411"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-70"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679100412"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679100412"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679100413"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100413"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (Either a' b' -&gt; MachineT m (Y a b) c)
-&gt; Either a' b'
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100413"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; (Either a' b' -&gt; WyeT m a' b' c)
-&gt; Either a' b'
-&gt; MachineT m (Y a b) c
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
Either a' b' -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100393"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either a' b' -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; Either a' b' -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b' -&gt; Either a' b'
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679100412"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-71"></span><span>      </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; MachineT m (Y a b) c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679100407"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-72"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100414"><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679100414"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is b t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679100425"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100425"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (MachineT m (Y a b) c)
 -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MachineT m (Y a b) c)
-&gt; Y a t t
-&gt; MachineT m (Y a b) c
-&gt; Step (Y a t) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679100426"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100426"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679100414"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100426"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y a t t
forall a b. Y a b b
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span>
</span><span id="line-73"></span><span>                                    </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (MachineT m (Y a b) c)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100425"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100427"><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679100427"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is a t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679100443"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100443"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b' -&gt; m (Step (Is b) b' (ProcessT m b b'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100334"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is b) b' (ProcessT m b b'))
-&gt; (Step (Is b) b' (ProcessT m b b')
    -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679100444"><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100444"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100444"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-75"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679100445"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679100445"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679100446"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100446"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (Either a' b' -&gt; MachineT m (Y a b) c)
-&gt; Either a' b'
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a') -&gt; ProcessT m a a'
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679100408"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100446"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; (Either a' b' -&gt; WyeT m a' b' c)
-&gt; Either a' b'
-&gt; MachineT m (Y a b) c
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
Either a' b' -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679100393"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either a' b' -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; Either a' b' -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b' -&gt; Either a' b'
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679100445"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-76"></span><span>      </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (MachineT m (Y a b) c)
 -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MachineT m (Y a b) c)
-&gt; Y t b t
-&gt; MachineT m (Y a b) c
-&gt; Step (Y t b) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679100447"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100447"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679100427"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100447"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y t b t
forall a b. Y a b a
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span>
</span><span id="line-77"></span><span>                                    </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (MachineT m (Y a b) c)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100443"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b (m :: * -&gt; *). Monad m =&gt; MachineT m k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-78"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679100448"><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679100448"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is b t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679100461"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100461"><span class="hs-identifier hs-var">fh</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (MachineT m (Y a b) c)
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (MachineT m (Y a b) c)
 -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either t t -&gt; MachineT m (Y a b) c)
-&gt; Y t t (Either t t)
-&gt; MachineT m (Y a b) c
-&gt; Step (Y t t) c (MachineT m (Y a b) c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679100462"><span class="annot"><span class="annottext">Either t t
</span><a href="#local-6989586621679100462"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either t t
</span><a href="#local-6989586621679100462"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-79"></span><span>                                                  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679100463"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100463"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679100427"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100463"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b') -&gt; ProcessT m b b'
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679100444"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-80"></span><span>                                                  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679100464"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100464"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a') -&gt; ProcessT m a a'
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679100408"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679100448"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679100464"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y t t (Either t t)
forall a b. Y a b (Either a b)
</span><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span>
</span><span id="line-81"></span><span>                                    </span><span class="annot"><span class="annottext">(MachineT m (Y a b) c -&gt; Step (Y a b) c (MachineT m (Y a b) c))
-&gt; (WyeT m a' b' c -&gt; MachineT m (Y a b) c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (MachineT m (Y a b) c)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; MachineT m (Y a b) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679100443"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679100461"><span class="hs-identifier hs-var">fh</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (MachineT m (Y a b) c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679100338"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="annot"><span class="hs-comment">-- | Precompose a pipe onto the left input of a wye.</span></span><span>
</span><span id="line-84"></span><span id="local-6989586621679100241"><span id="local-6989586621679100242"><span id="local-6989586621679100243"><span id="local-6989586621679100244"><span id="local-6989586621679100245"><span class="annot"><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier hs-type">addX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679100241"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100241"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100242"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100243"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100241"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100243"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100244"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100245"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100241"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100242"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100244"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100245"><span class="hs-identifier hs-type">d</span></a></span></span></span></span></span></span><span>
</span><span id="line-85"></span><span id="addX"><span class="annot"><span class="annottext">addX :: forall (m :: * -&gt; *) a b c d.
Monad m =&gt;
ProcessT m a b -&gt; WyeT m b c d -&gt; WyeT m a c d
</span><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier hs-var hs-var">addX</span></a></span></span><span> </span><span id="local-6989586621679100468"><span class="annot"><span class="annottext">ProcessT m a b
</span><a href="#local-6989586621679100468"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProcessT m a b -&gt; ProcessT m c c -&gt; WyeT m b c d -&gt; WyeT m a c d
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a b
</span><a href="#local-6989586621679100468"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m c c
forall a (m :: * -&gt; *). Monad m =&gt; MachineT m (Is a) a
</span><a href="Data.Machine.Process.html#echo"><span class="hs-identifier hs-var">echo</span></a></span><span>
</span><span id="line-86"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addX"><span class="hs-pragma hs-type">addX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><span class="hs-comment">-- | Precompose a pipe onto the right input of a wye.</span></span><span>
</span><span id="line-89"></span><span id="local-6989586621679100253"><span id="local-6989586621679100254"><span id="local-6989586621679100255"><span id="local-6989586621679100256"><span id="local-6989586621679100257"><span class="annot"><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier hs-type">addY</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679100253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100254"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100255"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100256"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100255"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100257"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100256"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100254"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100257"><span class="hs-identifier hs-type">d</span></a></span></span></span></span></span></span><span>
</span><span id="line-90"></span><span id="addY"><span class="annot"><span class="annottext">addY :: forall (m :: * -&gt; *) b c a d.
Monad m =&gt;
ProcessT m b c -&gt; WyeT m a c d -&gt; WyeT m a b d
</span><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier hs-var hs-var">addY</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a -&gt; ProcessT m b c -&gt; WyeT m a c d -&gt; WyeT m a b d
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a
forall a (m :: * -&gt; *). Monad m =&gt; MachineT m (Is a) a
</span><a href="Data.Machine.Process.html#echo"><span class="hs-identifier hs-var">echo</span></a></span><span>
</span><span id="line-91"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addY"><span class="hs-pragma hs-type">addY</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="annot"><span class="hs-comment">-- | Tie off one input of a wye by connecting it to a known source.</span></span><span>
</span><span id="line-94"></span><span id="local-6989586621679100263"><span id="local-6989586621679100264"><span id="local-6989586621679100266"><span id="local-6989586621679100267"><span class="annot"><a href="Data.Machine.Wye.html#capX"><span class="hs-identifier hs-type">capX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679100263"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100263"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100264"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100263"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100264"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100266"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100267"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100263"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100266"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100267"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-95"></span><span id="capX"><span class="annot"><span class="annottext">capX :: forall (m :: * -&gt; *) a b c.
Monad m =&gt;
SourceT m a -&gt; WyeT m a b c -&gt; ProcessT m b c
</span><a href="Data.Machine.Wye.html#capX"><span class="hs-identifier hs-var hs-var">capX</span></a></span></span><span> </span><span id="local-6989586621679100476"><span class="annot"><span class="annottext">SourceT m a
</span><a href="#local-6989586621679100476"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679100477"><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679100477"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Y b b a -&gt; b -&gt; a)
-&gt; MachineT m (Y b b) c -&gt; ProcessT m b c
forall (m :: * -&gt; *) (k :: * -&gt; *) i o.
Monad m =&gt;
(forall a. k a -&gt; i -&gt; a) -&gt; MachineT m k o -&gt; ProcessT m i o
</span><a href="Data.Machine.Process.html#process"><span class="hs-identifier hs-var">process</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; Either b b) -&gt; Y b b a -&gt; b -&gt; a
forall a b. (a -&gt; Either a a) -&gt; Y a a b -&gt; a -&gt; b
</span><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Either b b
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessT m b a -&gt; WyeT m a b c -&gt; MachineT m (Y b b) c
forall (m :: * -&gt; *) a b c d.
Monad m =&gt;
ProcessT m a b -&gt; WyeT m b c d -&gt; WyeT m a c d
</span><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier hs-var">addX</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b a
SourceT m a
</span><a href="#local-6989586621679100476"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679100477"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capX"><span class="hs-pragma hs-type">capX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="annot"><span class="hs-comment">-- | Tie off one input of a wye by connecting it to a known source.</span></span><span>
</span><span id="line-99"></span><span id="local-6989586621679100280"><span id="local-6989586621679100281"><span id="local-6989586621679100282"><span id="local-6989586621679100283"><span class="annot"><a href="Data.Machine.Wye.html#capY"><span class="hs-identifier hs-type">capY</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679100280"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100280"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100281"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100280"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100282"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100281"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100283"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100280"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100282"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100283"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-100"></span><span id="capY"><span class="annot"><span class="annottext">capY :: forall (m :: * -&gt; *) b a c.
Monad m =&gt;
SourceT m b -&gt; WyeT m a b c -&gt; ProcessT m a c
</span><a href="Data.Machine.Wye.html#capY"><span class="hs-identifier hs-var hs-var">capY</span></a></span></span><span> </span><span id="local-6989586621679100483"><span class="annot"><span class="annottext">SourceT m b
</span><a href="#local-6989586621679100483"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679100484"><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679100484"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Y a a a -&gt; a -&gt; a)
-&gt; MachineT m (Y a a) c -&gt; ProcessT m a c
forall (m :: * -&gt; *) (k :: * -&gt; *) i o.
Monad m =&gt;
(forall a. k a -&gt; i -&gt; a) -&gt; MachineT m k o -&gt; ProcessT m i o
</span><a href="Data.Machine.Process.html#process"><span class="hs-identifier hs-var">process</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Either a a) -&gt; Y a a a -&gt; a -&gt; a
forall a b. (a -&gt; Either a a) -&gt; Y a a b -&gt; a -&gt; b
</span><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessT m a b -&gt; WyeT m a b c -&gt; MachineT m (Y a a) c
forall (m :: * -&gt; *) b c a d.
Monad m =&gt;
ProcessT m b c -&gt; WyeT m a c d -&gt; WyeT m a b d
</span><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier hs-var">addY</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a b
SourceT m b
</span><a href="#local-6989586621679100483"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679100484"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capY"><span class="hs-pragma hs-type">capY</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="annot"><span class="hs-comment">-- | Tie off both inputs of a wye by connecting them to known sources.</span></span><span>
</span><span id="line-104"></span><span id="local-6989586621679100289"><span id="local-6989586621679100290"><span id="local-6989586621679100291"><span id="local-6989586621679100292"><span class="annot"><a href="Data.Machine.Wye.html#capWye"><span class="hs-identifier hs-type">capWye</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679100289"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100289"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100289"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100291"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100289"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100291"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100292"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100289"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100292"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-105"></span><span id="capWye"><span class="annot"><span class="annottext">capWye :: forall (m :: * -&gt; *) a b c.
Monad m =&gt;
SourceT m a -&gt; SourceT m b -&gt; WyeT m a b c -&gt; SourceT m c
</span><a href="Data.Machine.Wye.html#capWye"><span class="hs-identifier hs-var hs-var">capWye</span></a></span></span><span> </span><span id="local-6989586621679100488"><span class="annot"><span class="annottext">SourceT m a
</span><a href="#local-6989586621679100488"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679100489"><span class="annot"><span class="annottext">SourceT m b
</span><a href="#local-6989586621679100489"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679100490"><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679100490"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y Any Any) c -&gt; SourceT m c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
MachineT m k o -&gt; SourceT m o
</span><a href="Data.Machine.Source.html#plug"><span class="hs-identifier hs-var">plug</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y Any Any) c -&gt; SourceT m c)
-&gt; MachineT m (Y Any Any) c -&gt; SourceT m c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m Any a
-&gt; ProcessT m Any b -&gt; WyeT m a b c -&gt; MachineT m (Y Any Any) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m Any a
SourceT m a
</span><a href="#local-6989586621679100488"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m Any b
SourceT m b
</span><a href="#local-6989586621679100489"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679100490"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-106"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capWye"><span class="hs-pragma hs-type">capWye</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><span class="hs-comment">-- | Natural transformation used by 'capX' and 'capY'</span></span><span>
</span><span id="line-109"></span><span id="local-6989586621679100278"><span id="local-6989586621679100279"><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-type">capped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679100278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679100278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100278"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100279"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679100278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679100279"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-110"></span><span id="capped"><span class="annot"><span class="annottext">capped :: forall a b. (a -&gt; Either a a) -&gt; Y a a b -&gt; a -&gt; b
</span><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var hs-var">capped</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Y a a b
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a
a -&gt; b
forall a. a -&gt; a
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-111"></span><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Y a a b
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a
a -&gt; b
forall a. a -&gt; a
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span id="local-6989586621679100497"><span class="annot"><span class="annottext">a -&gt; Either a a
</span><a href="#local-6989586621679100497"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a a b
</span><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
a -&gt; Either a a
</span><a href="#local-6989586621679100497"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-113"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-pragma hs-type">capped</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-114"></span></pre></body></html>