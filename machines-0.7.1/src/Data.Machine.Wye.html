<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE Rank2Types #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Module      :  Data.Machine.Wye</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Copyright   :  (C) 2012 Edward Kmett, R&#250;nar Bjarnason, Paul Chiusano</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE)</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Stability   :  provisional</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Portability :  Rank-2 Types, GADTs</span><span>
</span><span id="line-12"></span><span class="hs-comment">--</span><span>
</span><span id="line-13"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Machine.Wye</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Wyes</span></span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Data.Machine.Wye.html#Wye"><span class="hs-identifier">Wye</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier">WyeT</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier">Y</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier">wye</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier">addX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier">addY</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capX"><span class="hs-identifier">capX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capY"><span class="hs-identifier">capY</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capWye"><span class="hs-identifier">capWye</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Category</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Process.html"><span class="hs-identifier">Data.Machine.Process</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Type.html"><span class="hs-identifier">Data.Machine.Type</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Is.html"><span class="hs-identifier">Data.Machine.Is</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Machine.Source.html"><span class="hs-identifier">Data.Machine.Source</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(.)</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">id</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- Wyes</span><span>
</span><span id="line-33"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-comment">-- | The input descriptor for a 'Wye' or 'WyeT'</span><span>
</span><span id="line-36"></span><span class="hs-keyword">data</span><span> </span><span id="Y"><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span></span><span> </span><span id="local-6989586621679091576"><span class="annot"><a href="#local-6989586621679091576"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679091575"><span class="annot"><a href="#local-6989586621679091575"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679091574"><span class="annot"><a href="#local-6989586621679091574"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-37"></span><span>  </span><span id="local-6989586621679091649"><span id="local-6989586621679091650"><span id="X"><span class="annot"><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091650"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091649"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091650"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>            </span><span class="hs-comment">-- block waiting on the left input</span><span>
</span><span id="line-38"></span><span>  </span><span id="local-6989586621679091645"><span id="local-6989586621679091646"><span id="Y"><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091646"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091645"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091645"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>            </span><span class="hs-comment">-- block waiting on the right input</span><span>
</span><span id="line-39"></span><span>  </span><span id="local-6989586621679091637"><span id="local-6989586621679091638"><span id="Z"><span class="annot"><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091638"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091637"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679091638"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091637"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-comment">-- block waiting on either input</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- | A 'Machine' that can read from two input stream in a non-deterministic manner.</span><span>
</span><span id="line-42"></span><span class="hs-keyword">type</span><span> </span><span id="Wye"><span class="annot"><a href="Data.Machine.Wye.html#Wye"><span class="hs-identifier hs-var">Wye</span></a></span></span><span> </span><span id="local-6989586621679091570"><span class="annot"><a href="#local-6989586621679091570"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679091569"><span class="annot"><a href="#local-6989586621679091569"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679091568"><span class="annot"><a href="#local-6989586621679091568"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Machine.Type.html#Machine"><span class="hs-identifier hs-type">Machine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091570"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091569"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679091568"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-comment">-- | A 'Machine' that can read from two input stream in a non-deterministic manner with monadic side-effects.</span><span>
</span><span id="line-45"></span><span class="hs-keyword">type</span><span> </span><span id="WyeT"><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-var">WyeT</span></a></span></span><span> </span><span id="local-6989586621679091567"><span class="annot"><a href="#local-6989586621679091567"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679091566"><span class="annot"><a href="#local-6989586621679091566"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679091565"><span class="annot"><a href="#local-6989586621679091565"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679091564"><span class="annot"><a href="#local-6989586621679091564"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Machine.Type.html#MachineT"><span class="hs-identifier hs-type">MachineT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091567"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091566"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091565"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679091564"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-comment">-- | Compose a pair of pipes onto the front of a 'Wye'.</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-- | Precompose a 'Process' onto each input of a 'Wye' (or 'WyeT').</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- This is left biased in that it tries to draw values from the 'X' input whenever they are</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- available, and only draws from the 'Y' input when 'X' would block.</span><span>
</span><span id="line-53"></span><span id="local-6989586621679091667"><span id="local-6989586621679091668"><span id="local-6989586621679091669"><span id="local-6989586621679091670"><span id="local-6989586621679091671"><span id="local-6989586621679091672"><span class="annot"><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-type">wye</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679091672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091671"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091670"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091669"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091668"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091670"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091668"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091667"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091671"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091669"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091667"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-54"></span><span id="wye"><span class="annot"><span class="annottext">wye :: ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var hs-var">wye</span></a></span></span><span> </span><span id="local-6989586621679091563"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span id="local-6989586621679091562"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span></span><span> </span><span id="local-6989586621679091561"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091561"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Step (Y a b) c (WyeT m a b c)) -&gt; WyeT m a b c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
m (Step k o (MachineT m k o)) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#MachineT"><span class="hs-identifier hs-var">MachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Step (Y a b) c (WyeT m a b c)) -&gt; WyeT m a b c)
-&gt; m (Step (Y a b) c (WyeT m a b c)) -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c -&gt; m (Step (Y a' b') c (WyeT m a' b' c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091561"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Y a' b') c (WyeT m a' b' c))
-&gt; (Step (Y a' b') c (WyeT m a' b' c)
    -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679091558"><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679091556"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679091556"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679091555"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091555"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (WyeT m a b c)
 -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; Step (Y a b) c (WyeT m a b c)
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; WyeT m a b c -&gt; Step (Y a b) c (WyeT m a b c)
forall (k :: * -&gt; *) o r. o -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-var">Yield</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679091556"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091555"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c)
forall (k :: * -&gt; *) o r. Step k o r
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091552"><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091552"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a' b' t
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span id="local-6989586621679091551"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091551"><span class="hs-identifier hs-var">ff</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a' -&gt; m (Step (Is a) a' (ProcessT m a a'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is a) a' (ProcessT m a a'))
-&gt; (Step (Is a) a' (ProcessT m a a')
    -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679091550"><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679091550"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679091550"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679091549"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679091549"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679091548"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091548"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091548"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091552"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a'
t
</span><a href="#local-6989586621679091549"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091551"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091545"><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679091545"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is a t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679091543"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091543"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (WyeT m a b c)
 -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; WyeT m a b c)
-&gt; Y t b t -&gt; WyeT m a b c -&gt; Step (Y t b) c (WyeT m a b c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679091542"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091542"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679091545"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091542"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c) -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y t b t
forall a b. Y a b a
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span>
</span><span id="line-61"></span><span>                                  </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (WyeT m a b c)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091543"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091540"><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091540"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a' b' t
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span> </span><span id="local-6989586621679091539"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091539"><span class="hs-identifier hs-var">ff</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b' -&gt; m (Step (Is b) b' (ProcessT m b b'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is b) b' (ProcessT m b b'))
-&gt; (Step (Is b) b' (ProcessT m b b')
    -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679091538"><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091538"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091538"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679091537"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679091537"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679091536"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091536"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091536"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091540"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b'
t
</span><a href="#local-6989586621679091537"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091539"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091535"><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679091535"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is b t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679091534"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091534"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (WyeT m a b c)
 -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; WyeT m a b c)
-&gt; Y a t t -&gt; WyeT m a b c -&gt; Step (Y a t) c (WyeT m a b c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679091533"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091533"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679091535"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091533"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c) -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y a t t
forall a b. Y a b b
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span>
</span><span id="line-66"></span><span>                                  </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (WyeT m a b c)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091534"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091532"><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091532"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a' b' t
</span><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span id="local-6989586621679091531"><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091531"><span class="hs-identifier hs-var">ff</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a' -&gt; m (Step (Is a) a' (ProcessT m a a'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091563"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is a) a' (ProcessT m a a'))
-&gt; (Step (Is a) a' (ProcessT m a a')
    -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679091530"><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679091530"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679091530"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679091529"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679091529"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679091528"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091528"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (Either a' b' -&gt; WyeT m a b c)
-&gt; Either a' b'
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091528"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; (Either a' b' -&gt; WyeT m a' b' c) -&gt; Either a' b' -&gt; WyeT m a b c
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
Either a' b' -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091532"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either a' b' -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; Either a' b' -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a' -&gt; Either a' b'
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679091529"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b' -&gt; m (Step (Is b) b' (ProcessT m b b'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is b) b' (ProcessT m b b'))
-&gt; (Step (Is b) b' (ProcessT m b b')
    -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679091527"><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091527"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091527"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-70"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679091526"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679091526"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679091525"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091525"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (Either a' b' -&gt; WyeT m a b c)
-&gt; Either a' b'
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091525"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; (Either a' b' -&gt; WyeT m a' b' c) -&gt; Either a' b' -&gt; WyeT m a b c
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
Either a' b' -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091532"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either a' b' -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; Either a' b' -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b' -&gt; Either a' b'
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679091526"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-71"></span><span>      </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a' b' c
</span><a href="#local-6989586621679091531"><span class="hs-identifier hs-var">ff</span></a></span><span>
</span><span id="line-72"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091524"><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679091524"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is b t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679091523"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091523"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (WyeT m a b c)
 -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; WyeT m a b c)
-&gt; Y a t t -&gt; WyeT m a b c -&gt; Step (Y a t) c (WyeT m a b c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679091522"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091522"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679091524"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091522"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c) -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y a t t
forall a b. Y a b b
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span>
</span><span id="line-73"></span><span>                                    </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (WyeT m a b c)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091523"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091521"><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679091521"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is a t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679091520"><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091520"><span class="hs-identifier hs-var">fg</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b' -&gt; m (Step (Is b) b' (ProcessT m b b'))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091562"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step (Is b) b' (ProcessT m b b'))
-&gt; (Step (Is b) b' (ProcessT m b b')
    -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679091519"><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091519"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091519"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-75"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Yield"><span class="hs-identifier hs-type">Yield</span></a></span><span> </span><span id="local-6989586621679091518"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679091518"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679091517"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091517"><span class="hs-identifier hs-var">k</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
MachineT m k o -&gt; m (Step k o (MachineT m k o))
</span><a href="Data.Machine.Type.html#runMachineT"><span class="hs-identifier hs-var hs-var">runMachineT</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (Either a' b' -&gt; WyeT m a b c)
-&gt; Either a' b'
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a') -&gt; ProcessT m a a'
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679091530"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091517"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; (Either a' b' -&gt; WyeT m a' b' c) -&gt; Either a' b' -&gt; WyeT m a b c
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; WyeT m a' b' c
Either a' b' -&gt; WyeT m a' b' c
</span><a href="#local-6989586621679091532"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either a' b' -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; Either a' b' -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b' -&gt; Either a' b'
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679091518"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-76"></span><span>      </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="Data.Machine.Type.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (WyeT m a b c)
 -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; WyeT m a b c)
-&gt; Y t b t -&gt; WyeT m a b c -&gt; Step (Y t b) c (WyeT m a b c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679091516"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091516"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679091521"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091516"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c) -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y t b t
forall a b. Y a b a
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span>
</span><span id="line-77"></span><span>                                    </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (WyeT m a b c)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091520"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
forall (k :: * -&gt; *) b. Machine k b
</span><a href="Data.Machine.Type.html#stopped"><span class="hs-identifier hs-var">stopped</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-78"></span><span>      </span><span class="annot"><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-type">Await</span></a></span><span> </span><span id="local-6989586621679091515"><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679091515"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="annottext">Is b t
</span><a href="Data.Machine.Is.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span id="local-6989586621679091514"><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091514"><span class="hs-identifier hs-var">fh</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step (Y a b) c (WyeT m a b c) -&gt; m (Step (Y a b) c (WyeT m a b c))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Step (Y a b) c (WyeT m a b c)
 -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; (WyeT m a' b' c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; WyeT m a' b' c
-&gt; m (Step (Y a b) c (WyeT m a b c))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either t t -&gt; WyeT m a b c)
-&gt; Y t t (Either t t)
-&gt; WyeT m a b c
-&gt; Step (Y t t) c (WyeT m a b c)
forall (k :: * -&gt; *) o r t. (t -&gt; r) -&gt; k t -&gt; r -&gt; Step k o r
</span><a href="Data.Machine.Type.html#Await"><span class="hs-identifier hs-var">Await</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679091513"><span class="annot"><span class="annottext">Either t t
</span><a href="#local-6989586621679091513"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either t t
</span><a href="#local-6989586621679091513"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-79"></span><span>                                                  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679091512"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091512"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m a a'
</span><a href="#local-6989586621679091521"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091512"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b') -&gt; ProcessT m b b'
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Is b) b' (ProcessT m b b')
</span><a href="#local-6989586621679091519"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c) -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-80"></span><span>                                                  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679091511"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091511"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a') -&gt; ProcessT m a a'
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Is a) a' (ProcessT m a a')
</span><a href="#local-6989586621679091530"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; ProcessT m b b'
</span><a href="#local-6989586621679091515"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679091511"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; WyeT m a b c) -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Y t t (Either t t)
forall a b. Y a b (Either a b)
</span><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span>
</span><span id="line-81"></span><span>                                    </span><span class="annot"><span class="annottext">(WyeT m a b c -&gt; Step (Y a b) c (WyeT m a b c))
-&gt; (WyeT m a' b' c -&gt; WyeT m a b c)
-&gt; WyeT m a' b' c
-&gt; Step (Y a b) c (WyeT m a b c)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a'
</span><a href="#local-6989586621679091520"><span class="hs-identifier hs-var">fg</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b b'
</span><a href="#local-6989586621679091514"><span class="hs-identifier hs-var">fh</span></a></span><span> </span><span class="annot"><span class="annottext">(WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c)))
-&gt; WyeT m a' b' c -&gt; m (Step (Y a b) c (WyeT m a b c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c) -&gt; WyeT m a' b' c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
Step k o (MachineT m k o) -&gt; MachineT m k o
</span><a href="Data.Machine.Type.html#encased"><span class="hs-identifier hs-var">encased</span></a></span><span> </span><span class="annot"><span class="annottext">Step (Y a' b') c (WyeT m a' b' c)
</span><a href="#local-6989586621679091558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-comment">-- | Precompose a pipe onto the left input of a wye.</span><span>
</span><span id="line-84"></span><span id="local-6989586621679091607"><span id="local-6989586621679091608"><span id="local-6989586621679091609"><span id="local-6989586621679091610"><span id="local-6989586621679091611"><span class="annot"><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier hs-type">addX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679091611"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091611"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091610"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091609"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091611"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091609"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091608"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091607"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091611"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091610"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091608"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091607"><span class="hs-identifier hs-type">d</span></a></span></span></span></span></span></span><span>
</span><span id="line-85"></span><span id="addX"><span class="annot"><span class="annottext">addX :: ProcessT m a b -&gt; WyeT m b c d -&gt; WyeT m a c d
</span><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier hs-var hs-var">addX</span></a></span></span><span> </span><span id="local-6989586621679091510"><span class="annot"><span class="annottext">ProcessT m a b
</span><a href="#local-6989586621679091510"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProcessT m a b -&gt; ProcessT m c c -&gt; WyeT m b c d -&gt; WyeT m a c d
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a b
</span><a href="#local-6989586621679091510"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m c c
forall a. Process a a
</span><a href="Data.Machine.Process.html#echo"><span class="hs-identifier hs-var">echo</span></a></span><span>
</span><span id="line-86"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addX"><span class="hs-pragma hs-type">addX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Precompose a pipe onto the right input of a wye.</span><span>
</span><span id="line-89"></span><span id="local-6989586621679091597"><span id="local-6989586621679091598"><span id="local-6989586621679091599"><span id="local-6989586621679091600"><span id="local-6989586621679091601"><span class="annot"><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier hs-type">addY</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679091601"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091601"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091600"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091599"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091601"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091599"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091597"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091601"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091600"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091597"><span class="hs-identifier hs-type">d</span></a></span></span></span></span></span></span><span>
</span><span id="line-90"></span><span id="addY"><span class="annot"><span class="annottext">addY :: ProcessT m b c -&gt; WyeT m a c d -&gt; WyeT m a b d
</span><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier hs-var hs-var">addY</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProcessT m a a -&gt; ProcessT m b c -&gt; WyeT m a c d -&gt; WyeT m a b d
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a a
forall a. Process a a
</span><a href="Data.Machine.Process.html#echo"><span class="hs-identifier hs-var">echo</span></a></span><span>
</span><span id="line-91"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#addY"><span class="hs-pragma hs-type">addY</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | Tie off one input of a wye by connecting it to a known source.</span><span>
</span><span id="line-94"></span><span id="local-6989586621679091505"><span id="local-6989586621679091506"><span id="local-6989586621679091507"><span id="local-6989586621679091508"><span class="annot"><a href="Data.Machine.Wye.html#capX"><span class="hs-identifier hs-type">capX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679091508"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091508"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091507"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091508"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091507"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091506"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091505"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091508"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091506"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091505"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-95"></span><span id="capX"><span class="annot"><span class="annottext">capX :: SourceT m a -&gt; WyeT m a b c -&gt; ProcessT m b c
</span><a href="Data.Machine.Wye.html#capX"><span class="hs-identifier hs-var hs-var">capX</span></a></span></span><span> </span><span id="local-6989586621679091504"><span class="annot"><span class="annottext">SourceT m a
</span><a href="#local-6989586621679091504"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679091503"><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679091503"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Y b b a -&gt; b -&gt; a)
-&gt; MachineT m (Y b b) c -&gt; ProcessT m b c
forall (m :: * -&gt; *) (k :: * -&gt; *) i o.
Monad m =&gt;
(forall a. k a -&gt; i -&gt; a) -&gt; MachineT m k o -&gt; ProcessT m i o
</span><a href="Data.Machine.Process.html#process"><span class="hs-identifier hs-var">process</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; Either b b) -&gt; Y b b a -&gt; b -&gt; a
forall a b. (a -&gt; Either a a) -&gt; Y a a b -&gt; a -&gt; b
</span><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Either b b
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessT m b a -&gt; WyeT m a b c -&gt; MachineT m (Y b b) c
forall (m :: * -&gt; *) a b c d.
Monad m =&gt;
ProcessT m a b -&gt; WyeT m b c d -&gt; WyeT m a c d
</span><a href="Data.Machine.Wye.html#addX"><span class="hs-identifier hs-var">addX</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m b a
SourceT m a
</span><a href="#local-6989586621679091504"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679091503"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capX"><span class="hs-pragma hs-type">capX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- | Tie off one input of a wye by connecting it to a known source.</span><span>
</span><span id="line-99"></span><span id="local-6989586621679091497"><span id="local-6989586621679091498"><span id="local-6989586621679091499"><span id="local-6989586621679091500"><span class="annot"><a href="Data.Machine.Wye.html#capY"><span class="hs-identifier hs-type">capY</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679091500"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091500"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091499"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091500"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091498"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091499"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091497"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Process.html#ProcessT"><span class="hs-identifier hs-type">ProcessT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091500"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091498"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091497"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-100"></span><span id="capY"><span class="annot"><span class="annottext">capY :: SourceT m b -&gt; WyeT m a b c -&gt; ProcessT m a c
</span><a href="Data.Machine.Wye.html#capY"><span class="hs-identifier hs-var hs-var">capY</span></a></span></span><span> </span><span id="local-6989586621679091496"><span class="annot"><span class="annottext">SourceT m b
</span><a href="#local-6989586621679091496"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679091495"><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679091495"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Y a a a -&gt; a -&gt; a)
-&gt; MachineT m (Y a a) c -&gt; ProcessT m a c
forall (m :: * -&gt; *) (k :: * -&gt; *) i o.
Monad m =&gt;
(forall a. k a -&gt; i -&gt; a) -&gt; MachineT m k o -&gt; ProcessT m i o
</span><a href="Data.Machine.Process.html#process"><span class="hs-identifier hs-var">process</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Either a a) -&gt; Y a a a -&gt; a -&gt; a
forall a b. (a -&gt; Either a a) -&gt; Y a a b -&gt; a -&gt; b
</span><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessT m a b -&gt; WyeT m a b c -&gt; MachineT m (Y a a) c
forall (m :: * -&gt; *) b c a d.
Monad m =&gt;
ProcessT m b c -&gt; WyeT m a c d -&gt; WyeT m a b d
</span><a href="Data.Machine.Wye.html#addY"><span class="hs-identifier hs-var">addY</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m a b
SourceT m b
</span><a href="#local-6989586621679091496"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679091495"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capY"><span class="hs-pragma hs-type">capY</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Tie off both inputs of a wye by connecting them to known sources.</span><span>
</span><span id="line-104"></span><span id="local-6989586621679091491"><span id="local-6989586621679091492"><span id="local-6989586621679091493"><span id="local-6989586621679091494"><span class="annot"><a href="Data.Machine.Wye.html#capWye"><span class="hs-identifier hs-type">capWye</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679091494"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091494"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091493"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091494"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091492"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#WyeT"><span class="hs-identifier hs-type">WyeT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091494"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091493"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091492"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091491"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Source.html#SourceT"><span class="hs-identifier hs-type">SourceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091494"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091491"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-105"></span><span id="capWye"><span class="annot"><span class="annottext">capWye :: SourceT m a -&gt; SourceT m b -&gt; WyeT m a b c -&gt; SourceT m c
</span><a href="Data.Machine.Wye.html#capWye"><span class="hs-identifier hs-var hs-var">capWye</span></a></span></span><span> </span><span id="local-6989586621679091490"><span class="annot"><span class="annottext">SourceT m a
</span><a href="#local-6989586621679091490"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679091489"><span class="annot"><span class="annottext">SourceT m b
</span><a href="#local-6989586621679091489"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679091488"><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679091488"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachineT m (Y Any Any) c -&gt; SourceT m c
forall (m :: * -&gt; *) (k :: * -&gt; *) o.
Monad m =&gt;
MachineT m k o -&gt; SourceT m o
</span><a href="Data.Machine.Source.html#plug"><span class="hs-identifier hs-var">plug</span></a></span><span> </span><span class="annot"><span class="annottext">(MachineT m (Y Any Any) c -&gt; SourceT m c)
-&gt; MachineT m (Y Any Any) c -&gt; SourceT m c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessT m Any a
-&gt; ProcessT m Any b -&gt; WyeT m a b c -&gt; MachineT m (Y Any Any) c
forall (m :: * -&gt; *) a a' b b' c.
Monad m =&gt;
ProcessT m a a'
-&gt; ProcessT m b b' -&gt; WyeT m a' b' c -&gt; WyeT m a b c
</span><a href="Data.Machine.Wye.html#wye"><span class="hs-identifier hs-var">wye</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m Any a
SourceT m a
</span><a href="#local-6989586621679091490"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessT m Any b
SourceT m b
</span><a href="#local-6989586621679091489"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">WyeT m a b c
</span><a href="#local-6989586621679091488"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-106"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capWye"><span class="hs-pragma hs-type">capWye</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- | Natural transformation used by 'capX' and 'capY'</span><span>
</span><span id="line-109"></span><span id="local-6989586621679091612"><span id="local-6989586621679091613"><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-type">capped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679091613"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679091613"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091613"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-type">Y</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091613"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091613"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679091612"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679091613"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679091612"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-110"></span><span id="capped"><span class="annot"><span class="annottext">capped :: (a -&gt; Either a a) -&gt; Y a a b -&gt; a -&gt; b
</span><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var hs-var">capped</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Y a a b
</span><a href="Data.Machine.Wye.html#X"><span class="hs-identifier hs-var">X</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-111"></span><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Y a a b
</span><a href="Data.Machine.Wye.html#Y"><span class="hs-identifier hs-var">Y</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span id="local-6989586621679091485"><span class="annot"><span class="annottext">a -&gt; Either a a
</span><a href="#local-6989586621679091485"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Y a a b
</span><a href="Data.Machine.Wye.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
a -&gt; Either a a
</span><a href="#local-6989586621679091485"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-113"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Machine.Wye.html#capped"><span class="hs-pragma hs-type">capped</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-114"></span></pre></body></html>